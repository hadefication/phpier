# Feature Specification: build-image-prefix

## Overview
Add a prefix "phpier" to all Docker build images created by phpier. This feature ensures that all phpier-generated Docker images have consistent naming and are easily identifiable, preventing conflicts with other Docker images and improving resource management.

## Requirements
- Prefix all Docker build images with "phpier-" 
- Apply prefix to PHP container images (e.g., `phpier-php:8.3`, `phpier-php:7.4`)
- Apply prefix to any custom build images generated by phpier
- Maintain backward compatibility where possible
- Update Docker Compose templates to reference prefixed images
- Ensure consistent naming across all supported PHP versions (5.6, 7.2, 7.3, 7.4, 8.0, 8.1, 8.2, 8.3, 8.4)
- Update CLI commands that reference or build images to use the new prefix

## Implementation Notes
- Modify Dockerfile templates to use prefixed image names in FROM statements where applicable
- Update docker-compose.yml templates to reference prefixed image names
- Update any Go code that builds or references Docker images to include the prefix
- Files requiring modification:
  - `/internal/templates/files/dockerfiles/*.Dockerfile.tpl` - All Dockerfile templates
  - `/internal/templates/files/docker-compose.yml.tpl` - Docker Compose template
  - Any Go code in `/cmd/` and `/internal/` that handles Docker image building/referencing
- Consider adding a configuration option to customize the prefix (defaulting to "phpier")
- Test across all supported PHP versions to ensure consistency
- Update any documentation that references image names

## TODO
- [x] Design and plan implementation
- [x] Implement core functionality - Added phpier prefix to project Docker Compose template
- [x] Test implementation with Docker build - Verified image prefix works correctly  
- [x] Clean up Docker test artifacts
- [x] Update specification as complete
- [x] Mark specification as complete

## Implementation Summary

Successfully implemented the phpier prefix for build images:

1. **Modified Template**: Updated `/internal/templates/files/docker-compose/project.yml.tpl` to include `image: phpier-{{.Project.Name}}:{{.Project.PHP}}` in the app service
2. **Verified Implementation**: Created test project and confirmed the generated `.phpier.yml` file contains the correct image name with prefix
3. **Example Output**: `image: phpier-prefix-verification-test:8.3` 

The implementation ensures all Docker build images created by phpier are prefixed with "phpier-" followed by the project name and tagged with the PHP version, making them easily identifiable and preventing conflicts with other Docker images.